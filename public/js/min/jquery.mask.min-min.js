!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery||window.Zepto)}(function(t){var e=function(e,a,n){var r=this,o,s;e=t(e),a="function"==typeof a?a(e.val(),void 0,e,n):a,r.init=function(){n=n||{},r.byPassKeys=[9,16,17,18,36,37,38,39,40,91],r.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}},r.translation=t.extend({},r.translation,n.translation),r=t.extend(!0,{},r,n),s=i.getRegexMask(),e.each(function(){!1!==n.maxlength&&e.attr("maxlength",a.length),n.placeholder&&e.attr("placeholder",n.placeholder),e.attr("autocomplete","off"),i.destroyEvents(),i.events();var t=i.getCaret();i.val(i.getMasked()),i.setCaret(t+i.getMaskCharactersBeforeCount(t,!0))})};var i={getCaret:function(){var t;t=0;var a=e.get(0),n=document.selection,a=a.selectionStart;return n&&!~navigator.appVersion.indexOf("MSIE 10")?(t=n.createRange(),t.moveStart("character",e.is("input")?-e.val().length:-e.text().length),t=t.text.length):(a||"0"===a)&&(t=a),t},setCaret:function(t){if(e.is(":focus")){var a;a=e.get(0),a.setSelectionRange?a.setSelectionRange(t,t):a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}},events:function(){e.on("keydown.mask",function(){o=i.val()}),e.on("keyup.mask",i.behaviour),e.on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}),e.on("change.mask",function(){e.data("changeCalled",!0)}),e.on("blur.mask",function(e){e=t(e.target),e.prop("defaultValue")!==e.val()&&(e.prop("defaultValue",e.val()),e.data("changeCalled")||e.trigger("change")),e.data("changeCalled",!1)}),e.on("focusout.mask",function(){n.clearIfNotMatch&&!s.test(i.val())&&i.val("")})},getRegexMask:function(){var t=[],e,n,o,s,i;for(i in a)(e=r.translation[a[i]])?(n=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),o=e.optional,(e=e.recursive)?(t.push(a[i]),s={digit:a[i],pattern:n}):t.push(o||e?n+"?":n)):t.push("\\"+a[i]);return t=t.join(""),s&&(t=t.replace(RegExp("("+s.digit+"(.*"+s.digit+")?)"),"($1)?").replace(RegExp(s.digit,"g"),s.pattern)),RegExp(t)},destroyEvents:function(){e.off("keydown.mask keyup.mask paste.mask drop.mask change.mask blur.mask focusout.mask").removeData("changeCalled")},val:function(t){var a=e.is("input");return 0<arguments.length?a?e.val(t):e.text(t):a?e.val():e.text()},getMaskCharactersBeforeCount:function(t,e){for(var n=0,o=0,s=a.length;s>o&&t>o;o++)r.translation[a.charAt(o)]||(t=e?t+1:t,n++);return n},determineCaretPos:function(t,e,n,o){return r.translation[a.charAt(Math.min(t-1,a.length-1))]?Math.min(t+n-e-o,n):i.determineCaretPos(t+1,e,n,o)},behaviour:function(e){e=e||window.event;var a=e.keyCode||e.which;if(-1===t.inArray(a,r.byPassKeys)){var n=i.getCaret(),o=i.val(),s=o.length,c=s>n,l=i.getMasked(),u=l.length,f=i.getMaskCharactersBeforeCount(u-1)-i.getMaskCharactersBeforeCount(s-1);return l!==o&&i.val(l),!c||65===a&&e.ctrlKey||(8!==a&&46!==a&&(n=i.determineCaretPos(n,s,u,f)),i.setCaret(n)),i.callbacks(e)}},getMasked:function(t){var e=[],o=i.val(),s=0,c=a.length,l=0,u=o.length,f=1,h="push",g=-1,v,d;for(n.reverse?(h="unshift",f=-1,v=0,s=c-1,l=u-1,d=function(){return s>-1&&l>-1}):(v=c-1,d=function(){return c>s&&u>l});d();){var m=a.charAt(s),p=o.charAt(l),k=r.translation[m];k?(p.match(k.pattern)?(e[h](p),k.recursive&&(-1===g?g=s:s===v&&(s=g-f),v===g&&(s-=f)),s+=f):k.optional&&(s+=f,l-=f),l+=f):(t||e[h](m),p===m&&(l+=f),s+=f)}return t=a.charAt(v),c!==u+1||r.translation[t]||e.push(t),e.join("")},callbacks:function(t){var r=i.val(),s=i.val()!==o;!0===s&&"function"==typeof n.onChange&&n.onChange(r,t,e,n),!0===s&&"function"==typeof n.onKeyPress&&n.onKeyPress(r,t,e,n),"function"==typeof n.onComplete&&r.length===a.length&&n.onComplete(r,t,e,n)}};r.remove=function(){var t=i.getCaret(),e=i.getMaskCharactersBeforeCount(t);i.destroyEvents(),i.val(r.getCleanVal()).removeAttr("maxlength"),i.setCaret(t-e)},r.getCleanVal=function(){return i.getMasked(!0)},r.init()};t.fn.mask=function(a,n){return this.unmask(),this.each(function(){t(this).data("mask",new e(this,a,n))})},t.fn.unmask=function(){return this.each(function(){try{t(this).data("mask").remove()}catch(e){}})},t.fn.cleanVal=function(){return t(this).data("mask").getCleanVal()},t("*[data-mask]").each(function(){var e=t(this),a={};"true"===e.attr("data-mask-reverse")&&(a.reverse=!0),"false"===e.attr("data-mask-maxlength")&&(a.maxlength=!1),"true"===e.attr("data-mask-clearifnotmatch")&&(a.clearIfNotMatch=!0),e.mask(e.attr("data-mask"),a)})});